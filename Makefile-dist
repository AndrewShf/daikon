# Main Makefile for Daikon

all:
	$(MAKE) -C bin
ifdef $DAIKONCLASS_SOURCES
	$(MAKE) -C java
endif
	# This comes last because it might fail
	$(MAKE) java-front-end

clean:
	$(MAKE) -C bin clean
ifdef $DAIKONCLASS_SOURCES
	$(MAKE) -C java clean
endif
	$(MAKE) -C clean

kvasir:
	cd kvasir && ./auto-everything.sh
# I removed the next three lines - P. Guo
#	cd kvasir && ./configure --prefix=`pwd`/inst
#	cd kvasir && make
#	cd kvasir && make install

java-front-end: front-end/java/config.status
	@echo "If this command fails, see 'Installing dfej' section in manual"
	$(MAKE) -C front-end/java

front-end/java/config.status:
	@echo "If this command fails, see 'Installing dfej' section in manual"
	cd front-end/java && ./configure

.PHONY: java-front-end kvasir
.SECONDARY: front-end/java/config.status
