Version:      $Id$
Owner:        scruffy@lcs.mit.edu, mharder <mharder@lcs.mit.edu>
Tool:         lh
Summary:      lh has bug with "_element" and "_index" for struct pointers
Severity:     Vexing
Status:       New
Reproducible: Yes
Description:

When lh instruments a pointer "*a", it adds the variables a_element
and a_index to the code.  Also, expressions involving "*a" are
replaced with expressions involving "*a" and possibly "a_element" and
"a_index".  These variables are added so we can determine lackwit
comparability of the elements and indices of the array.

However, lh isn't doing this correctly for struct pointers.  The
"_element" and "_index" variables are added as parameters, but
expressions involving the struct pointer aren't changed to use the
parameters.

To reproduce, run lh on the lackwit-structs.c test.  Look at
lackwit-structs.int.c, and compare struct_ptr_field_assign and
call_struct_ptr_field_assign to int_ptr and call_int_ptr.

[mharder]
This seems to be fixed.  Closing.

--
$Log$
Revision 1.2  2002-05-02 15:22:57  mharder
changed bug0044

Revision 1.1  2002/04/20 21:03:40  mharder
new bug0044

