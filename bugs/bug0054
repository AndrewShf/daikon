Version:      $Id$
Owner:        Alan <adonovan>, Mike <mernst>
Cc:           samir <smeghani>
Tool:         DFEJ
Summary:      Anonymous implementations of interfaces do not correctly handle variables in scope.
Severity:     Boneheaded
Status:       Open
Reproducible: Yes
Description:  

Implementing an interface anonymously within a method produces instrumented code that does not compile.  See ~smeghani/samirbugs/AnonymousSomeInterfaceImpl.java for an example.  The instrumented code creates a constructor with the correct arguments, but should make no explicit call to super(..).  The call to the constructor does not contain the correct arguments.

[adonovan]

Example code:
% cat A.java
interface B 
{
    public void foo();
}

class A 
{
    void bar() {
	final StringBuffer buffer = new StringBuffer("testString");
	new B() {
		public void foo() {
		    buffer.toString().length();
		}
	    };
    }
}
% ./src/dfej -daikon_instrument  A.java

Proposed fix: don't emit call of 'super' constructor if super is an
interface. See daikon-naming.cpp:115 for where to apply the fix. Sorry I can't do it myself right now.   


--
$Log$
Revision 1.4  2002-08-08 19:43:27  adonovan
changed bug0054

Revision 1.3  2002/08/08 19:29:13  smeghani
changed bug0054

Revision 1.2  2002/08/08 15:35:22  smeghani
changed bug0054

Revision 1.1  2002/08/08 15:30:34  smeghani
new bug0054

