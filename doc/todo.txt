Daikon todo list.
Time-stamp: <2007-04-20 14:34:38 jhp>

Projects

  - Optimize derived variables
      - apply equality sets, constants, etc to the creation of derived
        variables
      - reduce the size of variables

  - extend the hierarchy to subclasses and interfaces.

  - Improve the splitting code and make it work for more than 2 children.

  - NIS enhancements
      - Optimize merging and checking falsified antecedents
      - support multiple levels (and binary suppressees)
      - support sample-dependent antecedents
      - Gather statistics on the power of the new invariants as antecedents.
        Remove invariants that are not justified
      - Support some subset of derived variable suppressions.  
      - Merge data from antecedents

  - Testing
      - Build better tests for NIS.  There's a number of internal
        consistency checks that would probably find additional errors
      - We could possibly test our suppressions and obvious checks against
        simplify
      - Perhaps an overall testing strategy that uses the simple 
        incremental algorithm + simplify to create known correct output
        that we could test against.  

  - Analyze Daikon over a reasonable set of programs for memory use,
    execution speed, and other interesting statistics (invariants by
    class, percent invariants obvious by class, etc).  Make this easier
    to do in the future

  - Process daikon itself (at least the main directory) over a real test
    case.  Fix problems encountered.

  - Use ourselves as test case.  This requires daikon to work on
    itself, but also will require other usability work.  In
    particular, a good way to include results as asserts.

Issues/Bugs

  cpacheco	04/12/04	jmlc and ESC/Java2 regression tests

    Make the regression tests run jmlc and ECS/Java2 and complain if there
    are any problems.

  jhp	04/12/04	Javadoc regression tests

    Make the overnight tests run javadoc and complain if it gives any
    warnings.

  jhp     02/04/04      add checks for debug settings

    Its very easy to have a typo when adding classes, variables and ppts
    for --track.  It would be relatively simple to make sure that the
    class matched some valid daikon class, the ppt matched one of the
    ppts in the decl file, and that the variables matched one or more
    variables in the ppts specified.

  jhp     01/26/04      fix OneOf.isObviousDynamically == 0 check

    The 'x == 0' invariant is found to be obvious if x is a size(seq)
    derived variable.  This invariant would be implied by the
    'seq[] = []' invariant.  This code needs to check for the 
    size(seq)-1 derived variable since that does not have the same
    implication as size(seq) alone.

  jhp     01/13/04      Fixing missing out of bounds

    Missing out of bounds is implemented as a flag in the variable that
    indicates whether or not that derived variable has ever been out
    of bounds.  This creates many difficulties because the out of bounds
    information is tied up with the variable and not with the sample.
    This means that we can't easily apply the same sample to different
    program points (conditionals, globals, etc) with the same variables.
    Most of this has been hacked to work, but it is all ugly.  It would
    be much better if a more specific missing  flag were added to address
    this.  Then the out of bounds info would track with the sample which
    is correct.

  jhp     11/20/03      missingOutOfBounds implemented poorly

    The implementation of missingOutOfBounds by marking the variable
    has proven to be a consistent problem.  It is common to want to
    apply the same sample to different points (eg, the sample for
    an exit point to one of its conditional points).  The missing out of
    bounds info doesn't follow the sample and special code has to
    be added.  I make this mistake every time.  And the solution is
    not very efficient.

    I think this would be much better if it used a missing bit like
    other val related items.  Then out of bounds would track with the
    value which is what we want.

  jhp     12/18/03      Fix/remove EltwiseIntComparison.hasSeenNonTrivialSample

    The only purpose for the class seems to be to force children to implement
    hasSeenNonTrivialSample().  But the children do not implement this anymore
    as it would require state.  I think the base class should just be removed.
    Also, hasSeenNonTrivialSample() should be replaced with something that
    looks for the size of the array.  If its bound <= 1, then we can call
    this obvious.  We could also include this in the unary value tracker
    stuff.

  jhp     12/16/03      Change std invariant output to include the inv class

    It is often difficult to determine the class of a particular invariant
    when debugging a regression difference.  This could be aided by optionally
    including the invariant class with the invariant (eg, x == y [IntEqual]).
    It would be useful (I think) to make this the default format used for
    the regression tests.  Its not clear if this should be included in the
    standard Daikon output as it is not necessarily interesting to users.

  jhp     11/19/03      DynamicConstants.dkconfig_OneOf_only

    If this is set to true, invariants will be missed during the merge
    if the variable is a constant at one child and not a constant
    at the other 

  jhp     11/19/03      A == B && f(A) does not suppress f(B)

    If A and B are in the same equality set, f(B) is not even created.
    But if A and B are not in the same equality set (perhaps because
    they have different missing information) the A == B equality doesn't
    remove any invariants 

  jhp     11/10/03      Better solution for PptRelation and splitters

    Currently, PptRelations are created for each parent that has conditional
    children (both at the leaves and higher up the tree).  The conditional
    ppts always need these relations as parents so that parent filtering
    will work.  But non-leaf parents don't want these relations (since they
    are build from their normal children, not their conditional children).
    Right now, they are removed from the child list of the parent (but left
    in the parent list of the child).  This is ugly and a better fix should
    be added.  One possiblity is to change the parentfilter to autmatically
    do the filtering for conditionals even if there is no ppt relation.

  jhp     11/05/03      Add some test cases for Debug.java

    We should add some simple automatic tests for Debug.java to insure
    that its basic functionality is not broken (since it is very confusing
    when it doesn't work correctly)

  jhp     10/30/03      Fix slice creation in PptTopLevel.mergeInvs()

    Currently all possible slices are created and merged.  I think
    we could apply is_slice_ok here to not bother with uninteresting
    slices.  Note this works ok without it, because nothing is found
    in the unintersting slices in the children.  But it could help
    efficiency to fix this.     

  jhp      10/30/03      Fix invariant documentation

    The invariant documentation now includes versions for each permutation
    of each FunctionBinary function.   This needs to be changed to not
    show a separate class for each function

  jhp     10/30/03      --track should do some error checking

    It would be nice if --track could do some sort of error checking.
    It should also only print out the tracked vars once, rather than after
    each --track switch.

  jhp     09/02/03      Orig variables are not always found at exit point

    There is an assert in PptRelation.newEnterExitRel() that should be 
    turned back on.  Fix the resulting errors in the regression tests.

  jhp      09/02/03     Add comparability check when creating binary slices

    Comparability is not checked when creating binary slices since we 
    creates slices between arrays and integers.  This can be fixed to
    properly check comparability before creating the slice

Completed Issues

  jhp     11/19/03      equality sets and equality invariant don't merge

    If A and B are in an equality set in one child, and A == B are in
    the other child, neither an equality set not an equality invariant
    for A and B are created in the parent.

    I don't think this is true anymore.  I think the case Stephen saw
    was a bug when pivoting equality sets that I fixed.  If A == B in
    one child, then A and B are in separate equality sets in the parent.
    When we merge, we will find the A == B invariant in one child and 
    once we permute to the leader, we should find A == A in the other.

  jhp     12/15/03      remove all stateful invariants

    There are still a number of invariants (eg, subset/superset) that
    keep an internal state.  With the exception of bounds, oneof,
    linearbinary, and linearternary these should all be changed.

