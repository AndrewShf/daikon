<html>
<head>
<TITLE>Creating an account on pag</TITLE>
<link rev="made" href="mailto:mernst@csail.mit.edu">
</head>
<body>

<h1>Creating an account on pag</h1>

To create an account on pag, perform the following steps:
<p>

<ol>
<li>
<!--
Run inquir (for instance, on oregano, and using the .el rather than .elc
file) to get a UID.  Set the name and mail forwarding, at least, and note
the UID for use in the <tt>useradd</tt> command below.<p>

Currently, I can't run inquir, so I send email to Greg Shomo
&lt;pag-admin@techsquare.com&gt; indicating the username and the category
(e.g., undergrad, grad, guest), and he runs inquir for me.<p>

If it is impossible to run inquir or get someone else to do so, then look
at the end of
<tt>/etc/passwd</tt> and choose a UID from there.  Don't just omit the
"<tt>-u <em>UID</em></tt>" argument from the useradd command. <p>
-->
First find the correct UID for the new account.  It is important that
the UID match other accounts the person has at MIT.  If they currently
have a UID with csail, you can find it by executing the following: 
<pre>
    whois -h inquir.csail.mit.edu username
</pre>  
If not, mail Greg Shomo &lt;pag-admin@techsquare.com&gt; indicating 
the name, username and the category (e.g., undergrad, grad, guest), 
he will create a correct csail uid and let you know what it is. <p>

<li>
Create a new account on pag (you must be logged onto pag) like so:
<blockquote>
<pre>
su
setenv NEWUSERNAME <em>username</em>
setenv NEWUID <em>uid</em>

/usr/sbin/useradd -d /g5/users/$NEWUSERNAME -u $NEWUID $NEWUSERNAME
<em>echo "## Add to 'invariants' and 'pag' groups"</em>
emacs /etc/group
<em>echo "## Insert full name"</em>
emacs /etc/passwd
yppasswd $NEWUSERNAME
<em>echo "## If can't use yppasswd (e.g., no root password), edit /etc/passwd with:"</em>
openssl passwd NEWPASSWD
make -C /var/yp
<em>echo "## Add to 'daikon' or 'pag' mailing list"</em>
emacs /etc/aliases
newaliases
cd ~$NEWUSERNAME
echo "## Adjust directory permissions"
chmod og+rx .
<em>echo "## Set up dotfiles"</em>
echo "" >> .bashrc
cat /g2/users/mernst/research/invariants/doc/www/mit/.bashrc >> .bashrc
cp -pf /g2/users/mernst/research/invariants/doc/www/mit/.cshrc .
cp -pf /g2/users/mernst/research/invariants/doc/www/mit/.cvsrc .
echo "" >> .emacs
echo "" >> .emacs
cat /g2/users/mernst/research/invariants/doc/www/mit/.emacs >> .emacs
chown $NEWUSERNAME .cshrc .cvsrc .emacs
chgrp $NEWUSERNAME .cshrc .cvsrc .emacs
<em>echo "## Set up email forwarding to Athena"</em>
echo $NEWUSERNAME@mit.edu > .forward
chown $NEWUSERNAME .forward
chgrp $NEWUSERNAME .forward
echo "## Add to PAG weppages"
echo "## (Also ensure the person appears in ~mernst/www/research/students.html)"
emacs /home/httpd/html/pag/people-tree.tree
make -C /home/httpd/html/pag
exit
</pre>
</blockquote>

<li>
Now point people at the following webpages:<br>
Program Analysis Group logistics:<br>
<a href="http://pag.csail.mit.edu/pag/logistics.html">http://pag.csail.mit.edu/pag/logistics.html</a><br>
Using Daikon at MIT CSAIL:<br>
<a href="http://pag.csail.mit.edu/daikon/mit/">http://pag.csail.mit.edu/daikon/mit/</a>

</ol>

To remove an account, perhaps make a tar file of the user's directory, then do
<blockquote>
<pre>
  userdel -r <em>USERNAME</em>
  (cd /var/yp; make)
</pre>
</blockquote>

<hr>
<a href="./">Using Daikon at MIT</a><p>

<address>
  <a href="http://pag.csail.mit.edu/~mernst/">Michael Ernst</a>
</address>

</body>
</html>
