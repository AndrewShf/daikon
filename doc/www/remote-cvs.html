<html>
<head>
<title>Remote CVS for the Daikon Project</title>
</head>
<body>

<h1>Remote CVS for the Daikon Project</h1>

Originally by Michael Harder

<p>

These instructions show you how to use remote CVS over SSH, without
entering your password every time.  It is assumed you already have CVS
and SSH installed on a Unix-like computer, which will be referred to
as "the local machine".

<ol>

<li>Test the SSH installation.  From the local machine, run:

<pre>ssh -l <i>username</i> pag.csail.mit.edu</pre>

where <tt><i>username</i></tt> is your PAG username. You should be prompted
for your password, and then logged in.  If not, there's a problem with
either your PAG account or your local SSH installation that's beyond
the scope of these instructions.

<p><br>

<li>Set up SSH for password-less usage.  Make a directory called .ssh
in your local home directory.  Then run the following command:

<pre>ssh-keygen -C <i>comment</i> -f ~/.ssh/identity</pre>

where <tt><i>comment</i></tt> is a string used to identify your public
key, conventionally your email address.  Enter a passphrase (which you
should protect as closely as your password.)  As the name implies, the
passphrase can be of any length; it isn't limited to 8 characters as
some Unix passwords are. If the command gives the error <tt>You must
specify a key type (-t)</tt>, add the option <tt>-t ssh-dss</tt>.

<p>

Now you need to set up the server to accept your keys.  Use the secure
copy command to send the identity.pub key to the server:

<pre>scp ~/.ssh/identity.pub <i>username</i>@pag.csail.mit.edu:identity.pub</pre>

Then log in to the server using the ssh command:

<pre>ssh -l <i>username</i> pag.csail.mit.edu</pre>

Now type the following commands into the SSH session, to copy the
public key into the list of those allowed for logging in:

<pre>
mkdir -p ~/.ssh
cat identity.pub >> ~/.ssh/authorized_keys
chmod -R go-rwx ~/.ssh
rm identity.pub
logout
</pre>

Go back and try logging in with ssh again; it should now prompt for
the key passphrase and then log you in. If it asks for your regular
password after you give the key passphrase, the key isn't being
accepted. Sometimes, the cause of such a problem can be discovered by
giving the '<tt>-v</tt>' option to SSH, and examining the resulting
trace for messages involving the name of the key file or the phrase
<tt>publickey</tt>.

To actually avoid typing your passphrase, you must get your local
computer to store the decrypted private key between logins. This is
done with a command named <tt>ssh-agent</tt>. To start the ssh-agent
program, say

<pre>eval `ssh-agent`</pre>

(The <tt>eval</tt> is used to set environment variables that ssh and
the agent will use to rendezvous). Then, to add your identity, use the
command <tt>ssh-add</tt>:

<pre>ssh-add</pre>

If you have more than one set of keys, you need to specify which
one. <tt>ssh-add</tt> will prompt for your passphrase, and then send
the decrypted key to the ssh-agent process.  To check that the key was
correctly loaded, you can say <tt>ssh-add -l</tt> to list all the
available keys.

<p>

You should now be able to log in without typing a passphrase, as long
as the ssh-agent is running and accessible.  You may wish to set up
ssh-agent and ssh-add so they run every time you log in to the local
machine; however, this depends on the details of how your local
machine is configured. 

<p><br>

<li>Tell CVS to use SSH.  Set the environment variable CVS_RSH (tcsh syntax):

<pre>setenv CVS_RSH ssh</pre>

You should add this to one of your dotfiles (like .cshrc) so it gets
set every time you log in.

<p><br>

<li>To obtain the invariants module, use:

<pre>
cvs -d :ext:<i>username</i>@pag.csail.mit.edu:/g4/projects/invariants/.CVS co invariants
</pre>

Other modules can be obtained by replacing the final
<tt>invariants</tt> with another module name. For instance, to obtain
the dfej module, use:

<pre>
cvs -d :ext:<i>username</i>@pag.csail.mit.edu:/g4/projects/invariants/.CVS co dfej
</pre>

After executing these commands, you should be able to issue CVS
commands such as

<pre>cvs update</pre>

to have your copy of the repository updated from the master version.

</ol>


</body>
</html>
